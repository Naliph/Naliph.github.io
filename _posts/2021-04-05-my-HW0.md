---
layout: post
title: My HW0 - Penguins Data Visualization
---
A tutorial to construct an interesting data visualization of the [Palmer Penguins](https://github.com/allisonhorst/palmerpenguins) data set.

## Import Libraries, Load Data, and Clean Data:
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

url = "https://raw.githubusercontent.com/PhilChodrow/PIC16B/master/datasets/palmer_penguins.csv"
penguins = pd.read_csv(url)
```
The full data set included columns:

```
studyName, Sample Number, Species, Region, Island, Stage, Individual ID, Clutch Completion, Date Egg, Culmen Length (mm), Culmen Depth (mm), Flipper Length (mm), Body Mass (g), Sex, Delta 15 N (o/oo), Delta 13 C (o/oo), Comments 
```

Remove unnecessary columns for visualization, Remove penguins with missing data, check for mistakes in the data (Sex column has `.` symbol), and shorten species names:

```python
penguins = penguins[['Species', 'Island', 'Culmen Length (mm)', 'Culmen Depth (mm)', 'Flipper Length (mm)', 'Body Mass (g)', 'Sex', 'Delta 15 N (o/oo)', 'Delta 13 C (o/oo)']]
penguins = penguins.dropna()
penguins = penguins[penguins['Sex'] != '.']
penguins["Species"] = penguins["Species"].str.split().str.get(0)
```
After cleaned up, the data included:
* 3 penguins species: `Adelie`, `Chinstrap`, `Gentoo`
* 3 Islands: `Torgersen`, `Biscoe`, `Dream`
* 2 Sexes: `FEMALE`, `MALE`
* 6 physiological variables: `Culmen Length (mm)`,`Culmen Depth (mm)`, `Flipper Length (mm)`, `Body Mass (g)`, `Delta 15 N (o/oo)`, `Delta 13 C (o/oo)`

## Find Correlation between Variables
Summary Table of 6 physiological variables:


| **Species**     |   **Culmen Length (mm)**   |  **Culmen Depth (mm)** |   **Flipper Length (mm)** |   **Body Mass (g)** |   **Delta 15 N (o/oo)** |   **Delta 13 C (o/oo)** |
|:-------------|----------------------------:|-----------------------:|--------------------------:|-------------------:|--------------------:|--------------------:|
| Adelie    |                38.79 |               18.32 |                190.32 |         3702.7  |                8.86 |              -25.81 |
| Chinstrap |                48.79 |               18.4  |                195.67 |         3729.85 |                9.36 |              -24.56 |
| Gentoo    |                47.57 |               14.99 |                217.19 |         5091.1  |                8.25 |              -26.18 |


**OBSERVATION:**
- **Adelie** has significant short **Culmen Length** at a mean of 38.79mm as compared to 48.79mm and 18.42mm for Chinstrap and Gentoo penguins
- **Gentoo** has the smallest **Culmen Depth** at a mean of 14.99mm compared to 18.32mm and 18.40mm of Adelie and Chinstrap penguins.
- **Gentoo** has the longest **Flipper Length** on average with a mean of 217.19 mm while Adelies' and Chinstraps' average flipper lengths are around 190-195 mm.
- **Gentoo** also have the largest **Body Mass** at averaging a weight over 5000g compared to the other two species' with averages around 3700g.

**ANALIZE:**
- For all of the penguins species, summarized by sex and island, the variable of Delta 15 N (o/oo) and Delta 13 C (o/oo) isotopes shows not much different and the isotopes' difference within the 3 species are small and insignificant. Therefore, there 2 variable will be removed and we will only look at: Culmen Length, Culmen Depth, Flipper Length, Body Mass.
- The large body mass of Gentoo penguins is something should be focus on since it's signifantly large than the others
- The flipper Length data and Culmen Depth data shows a similar distinction where Gentoo penguins largely differ from the other 2 species. Thus, only focus in body mass because they are helping us find the same distintion with only 1 column and larger distinction.
- Culmen Length data is important to distinguish Adelie penguins

Overall, using data visualize to graph the corellation between body masses and culmen lengths

## Data Visualization

```python
# Function for Histogram:
def hist(df, colname, alpha):
    plt.hist(df[colname], alpha = alpha, 
             label = ', '.join(df.name) if (type(df.name)==tuple) else df.name)

plt.figure(figsize=(8,8))
# subplot 1: Culmen Dephth
plt.subplot(321)
penguins.groupby("Species").apply(hist, "Culmen Depth (mm)", 0.6)
plt.xlabel('Culmen Depth (mm)')
plt.ylabel('Frequency')

# subplot 2: Flipper Length
plt.subplot(322)
penguins.groupby("Species").apply(hist, "Flipper Length (mm)", 0.6)
plt.xlabel('Flipper Length (mm)')

# subplot 3: Body Mass
plt.subplot(323)
penguins.groupby("Species").apply(hist, "Body Mass (g)", 0.6)
plt.xlabel('Body Mass (g)')
plt.ylabel('Frequency')

# subplot 4: Culmen Length
plt.subplot(324)
penguins.groupby("Species").apply(hist, "Culmen Length (mm)", 0.6)
plt.xlabel('Culmen Length (mm)')

lgd = plt.legend(bbox_to_anchor=(1.15, 0.6))

# subplot 5: Delta 15 N isotope
plt.subplot(325)
penguins.groupby("Species").apply(hist, "Delta 15 N (o/oo)", 0.6)
plt.xlabel('Delta 15 N (o/oo)')
plt.ylabel('Frequency')

# subplot 6: Delta 13 Cisotopes
plt.subplot(326)
penguins.groupby("Species").apply(hist, "Delta 13 C (o/oo)", 0.6)
plt.xlabel('Delta 13 C (o/oo)')

plt.tight_layout()
```
![penguins-hist-distribution.png](/images/penguins-hist-distribution.png)


Both distribution of Flipper Length and Culmen Depth is to distiguish Gentoo. Alsp Body Mass, but Body mass have larger differences

## Relationship between Important Features and Species:
```python
# Function for Scatter Plot:
def scatter(df, x_cols, y_cols, alpha):
    plt.scatter(df[x_cols], df[y_cols], alpha = alpha, label = ', '.join(df.name) if (type(df.name)==tuple) else df.name)

# Scatter Plot - Culmen Length x Body Mass by Species
fig, ax = plt.subplots(1)

penguins.groupby(['Species']).apply(scatter, 'Culmen Length (mm)', 'Body Mass (g)', alpha = 0.5)

ax.set(title='Graph 1 - Culmen Length vs. Body Mass by Species', xlabel='Culmen Length (mm)', ylabel='Body Mass (g)')
plt.legend(loc=0, framealpha=0)
```
![Species-distribution.png](/images/Species-distribution.png)

There is a correlation between these 2 measurements. Penguins with smaller Culmen Lengths and Body Masses are most likely Adelie penguins. While penguins with large Culmen Lengths and Masses are most likely Gentoo.
The clusters do overlap a lot. Hence, need to look at penguins mean measurements by Island:

```python
# Scatter Plot: Culmen Length x Body Mass by Island
plt.figure(figsize=(10,15))

# subplot 1: by Island
plt.subplot(211)
penguins.groupby(['Species', 'Island']).apply(scatter, 'Culmen Length (mm)', 'Body Mass (g)', alpha = 0.5)
plt.title('Culmen Length vs. Body Mass by Species and Island')
plt.xlabel('Culmen Length (mm)')
plt.ylabel('Body Mass (g)')
plt.legend(loc=0, framealpha=0)

# subplot 2: by Sex
plt.subplot(212)
penguins.groupby(['Species', 'Sex']).apply(scatter, 'Culmen Length (mm)', 'Body Mass (g)', alpha = 0.5)
plt.title('Culmen Length vs. Body Mass by Species and Sex')
plt.xlabel('Culmen Length (mm)')
plt.ylabel('Body Mass (g)')
plt.legend(loc=0, framealpha=0)

plt.savefig("Species-distribution-by-Island-or-Sex.png")
```
![Species-distribution-by-Island-or-Sex.png](/images/Species-distribution-by-Island-or-Sex.png)


**Observation:**<br>
* The Island classification shows:
    - some Adelies from Biscoe Island have very similar Body Masses and Culmen Lengths to Gentoo penguins (which all come from Biscoe).
    - Some Adelie from Dream Island have very similar measurements to Chinstrap from Dream Island
    - Knowing which island a penguins is from is not much more helpful than only knowing the measurements of body mass and culmen length
    
 * The Sex classification shows:
     - There are 6 clusters based on the 3 measurement we have graphed (Body Mass, Culmen length, Sex)
     - Where the Adelie penguins' body measurement are similar to Gentoo penguins: they are Male Adelie and Female Gentoo
     - Where Adelie penguins have similar measurements to Chinstrap penguins: they are Female Adelie and Male Chinstrap
     - Where Chinstrap penguins have very close measurements to Gentoo penguins: they are Female Chinstrap and Male Gentoo
     
**Overall:**<br>
Sex is a better trait to look at than island because it helps us distinguish penguin species when body mass and culmen length measurements are close to those of another species

Just from these data summary and visualization, we have analyzed that it would be easier to guess which species any given penguins is just by knowing its `Culmen Length, Body Mass, and Sex`
